import { LinearGradient } from 'expo-linear-gradient';
import { useRouter } from 'expo-router';
import { ArrowLeft, CheckCircle, Gift, Lock, Mail, Phone, Sparkles, User } from 'lucide-react-native';
import { useEffect, useRef, useState } from 'react';
import {
  Animated,
  Dimensions,
  Keyboard,
  KeyboardAvoidingView,
  Platform,
  ScrollView,
  StatusBar,
  StyleSheet,
  Text,
  TextInput,
  TouchableOpacity,
  View,
} from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';

const { height, width } = Dimensions.get('window');
const isTablet = width >= 768;
const isSmallDevice = width < 375;
const scale = (size) => (width / 375) * size;
const verticalScale = (size) => (height / 812) * size;
const moderateScale = (size, factor = 0.5) => size + (scale(size) - size) * factor;

const COLORS = {
  primary: '#016B3A',
  primaryLight: '#00FF87',
  primaryDark: '#013B1F',
  darkestGreen: '#012B17',
  white: '#FFFFFF',
  textDark: '#1F2937',
  textGray: '#6B7280',
  textLight: '#9CA3AF',
  border: '#E5E7EB',
  borderLight: '#F3F4F6',
  error: '#EF4444',
  errorLight: '#FEE2E2',
  success: '#10B981',
  successLight: '#D1FAE5',
};

const ContinueWithEmail = ({
  fullName,
  onChangeFullName,
  email,
  onChangeEmail,
  emailError,
  isEmailValid,
  handleEmailContinue,
}) => {
  const [focusedField, setFocusedField] = useState(null);
  const nameAnimation = useRef(new Animated.Value(0)).current;
  const emailAnimation = useRef(new Animated.Value(0)).current;

  const handleFocus = (field, animation) => {
    setFocusedField(field);
    Animated.spring(animation, {
      toValue: 1,
      useNativeDriver: false,
      tension: 50,
      friction: 7,
    }).start();
  };

  const handleBlur = (animation) => {
    setFocusedField(null);
    Animated.spring(animation, {
      toValue: 0,
      useNativeDriver: false,
    }).start();
  };

  return (
    <View style={styles.formContainer}>
      <View style={styles.inputGroup}>
        <Text style={styles.label}>Full Name *</Text>
        <Animated.View
          style={[
            styles.inputWrapper,
            {
              borderColor: nameAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [COLORS.border, COLORS.primary],
              }),
              borderWidth: nameAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [1.5, 2],
              }),
            },
          ]}
        >
          <View style={[styles.iconBox, focusedField === 'name' && styles.iconBoxActive]}>
            <User size={moderateScale(18)} color={focusedField === 'name' ? COLORS.primary : COLORS.textGray} />
          </View>
          <TextInput
            style={styles.input}
            placeholder="Enter your full name"
            value={fullName}
            onChangeText={onChangeFullName}
            placeholderTextColor={COLORS.textLight}
            returnKeyType="next"
            onFocus={() => handleFocus('name', nameAnimation)}
            onBlur={() => handleBlur(nameAnimation)}
          />
          {fullName.length > 1 && (
            <CheckCircle size={moderateScale(18)} color={COLORS.success} style={styles.checkIcon} />
          )}
        </Animated.View>
      </View>

      <View style={styles.inputGroup}>
        <Text style={styles.label}>Email Address *</Text>
        <Animated.View
          style={[
            styles.inputWrapper,
            emailError && styles.inputError,
            {
              borderColor: emailAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [emailError ? COLORS.error : COLORS.border, emailError ? COLORS.error : COLORS.primary],
              }),
              borderWidth: emailAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [1.5, 2],
              }),
            },
          ]}
        >
          <View style={[styles.iconBox, focusedField === 'email' && !emailError && styles.iconBoxActive]}>
            <Mail size={moderateScale(18)} color={focusedField === 'email' ? COLORS.primary : COLORS.textGray} />
          </View>
          <TextInput
            style={styles.input}
            placeholder="name@company.com"
            keyboardType="email-address"
            autoCapitalize="none"
            autoCorrect={false}
            value={email}
            onChangeText={onChangeEmail}
            placeholderTextColor={COLORS.textLight}
            returnKeyType="done"
            onFocus={() => handleFocus('email', emailAnimation)}
            onBlur={() => handleBlur(emailAnimation)}
          />
          {isEmailValid && (
            <CheckCircle size={moderateScale(18)} color={COLORS.success} style={styles.checkIcon} />
          )}
        </Animated.View>
        {emailError ? (
          <View style={styles.errorContainer}>
            <Text style={styles.errorText}>⚠ {emailError}</Text>
          </View>
        ) : null}
      </View>

      <TouchableOpacity
        style={[styles.button, !isEmailValid && styles.buttonDisabled]}
        onPress={handleEmailContinue}
        disabled={!isEmailValid}
        activeOpacity={0.85}
      >
        <LinearGradient
          colors={isEmailValid ? [COLORS.primaryLight, COLORS.primary] : [COLORS.textLight, COLORS.textGray]}
          start={{ x: 0, y: 0 }}
          end={{ x: 1, y: 0 }}
          style={styles.buttonGradient}
        >
          <Mail size={moderateScale(18)} color={COLORS.white} style={styles.buttonIcon} />
          <Text style={styles.buttonText}>Send Magic Link</Text>
        </LinearGradient>
      </TouchableOpacity>

      <View style={styles.privacyNote}>
        <View style={styles.privacyIconBox}>
          <Lock size={moderateScale(12)} color={COLORS.primary} />
        </View>
        <Text style={styles.privacyText}>No spam — unsubscribe anytime</Text>
      </View>
    </View>
  );
};

const ContinueWithPhone = ({
  referral,
  setReferral,
  mobile,
  setMobile,
  error,
  isValid,
  handleSendOTP,
}) => {
  const [focusedField, setFocusedField] = useState(null);
  const referralAnimation = useRef(new Animated.Value(0)).current;
  const phoneAnimation = useRef(new Animated.Value(0)).current;

  const handleFocus = (field, animation) => {
    setFocusedField(field);
    Animated.spring(animation, {
      toValue: 1,
      useNativeDriver: false,
      tension: 50,
      friction: 7,
    }).start();
  };

  const handleBlur = (animation) => {
    setFocusedField(null);
    Animated.spring(animation, {
      toValue: 0,
      useNativeDriver: false,
    }).start();
  };

  return (
    <View style={styles.formContainer}>
      <View style={styles.inputGroup}>
        <Text style={styles.label}>Referral Code (Optional)</Text>
        <Animated.View
          style={[
            styles.inputWrapper,
            {
              borderColor: referralAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [COLORS.border, COLORS.primary],
              }),
              borderWidth: referralAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [1.5, 2],
              }),
            },
          ]}
        >
          <View style={[styles.iconBox, focusedField === 'referral' && styles.iconBoxActive]}>
            <Gift size={moderateScale(18)} color={focusedField === 'referral' ? COLORS.primary : COLORS.textGray} />
          </View>
          <TextInput
            style={styles.input}
            placeholder="Enter referral code"
            value={referral}
            onChangeText={(text) => setReferral(text.toUpperCase())}
            autoCapitalize="characters"
            placeholderTextColor={COLORS.textLight}
            onFocus={() => handleFocus('referral', referralAnimation)}
            onBlur={() => handleBlur(referralAnimation)}
          />
          {referral.length > 0 && (
            <CheckCircle size={moderateScale(18)} color={COLORS.success} style={styles.checkIcon} />
          )}
        </Animated.View>
      </View>

      <View style={styles.inputGroup}>
        <Text style={styles.label}>Mobile Number *</Text>
        <Animated.View
          style={[
            styles.inputWrapper,
            error && styles.inputError,
            {
              borderColor: phoneAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [error ? COLORS.error : COLORS.border, error ? COLORS.error : COLORS.primary],
              }),
              borderWidth: phoneAnimation.interpolate({
                inputRange: [0, 1],
                outputRange: [1.5, 2],
              }),
            },
          ]}
        >
          <View style={[styles.iconBox, focusedField === 'phone' && !error && styles.iconBoxActive]}>
            <Phone size={moderateScale(18)} color={focusedField === 'phone' ? COLORS.primary : COLORS.textGray} />
          </View>
          <View style={styles.phoneInputContainer}>
            <Text style={styles.countryCode}>+91</Text>
            <TextInput
              style={[styles.input, styles.phoneInput]}
              placeholder="Enter 10-digit number"
              keyboardType="number-pad"
              maxLength={10}
              value={mobile}
              onChangeText={(text) => setMobile(text.replace(/[^0-9]/g, ''))}
              placeholderTextColor={COLORS.textLight}
              onFocus={() => handleFocus('phone', phoneAnimation)}
              onBlur={() => handleBlur(phoneAnimation)}
            />
          </View>
          {mobile.length === 10 && (
            <CheckCircle size={moderateScale(18)} color={COLORS.success} style={styles.checkIcon} />
          )}
        </Animated.View>
        {error ? (
          <View style={styles.errorContainer}>
            <Text style={styles.errorText}>⚠ {error}</Text>
          </View>
        ) : null}
      </View>

   

      <TouchableOpacity
        style={[styles.button, !isValid && styles.buttonDisabled]}
        onPress={handleSendOTP}
        disabled={!isValid}
        activeOpacity={0.85}
      >
        <LinearGradient
          colors={isValid ? [COLORS.primaryLight, COLORS.primary] : [COLORS.textLight, COLORS.textGray]}
          start={{ x: 0, y: 0 }}
          end={{ x: 1, y: 0 }}
          style={styles.buttonGradient}
        >
          <Phone size={moderateScale(18)} color={COLORS.white} style={styles.buttonIcon} />
          <Text style={styles.buttonText}>Send OTP</Text>
        </LinearGradient>
      </TouchableOpacity>

      <View style={styles.privacyNote}>
        <View style={styles.privacyIconBox}>
          <Lock size={moderateScale(12)} color={COLORS.primary} />
        </View>
        <Text style={styles.privacyText}>Your privacy is protected with bank-grade security</Text>
      </View>
    </View>
  );
};

export default function PhoneRegisterScreen() {
  const [mobile, setMobile] = useState('');
  const [referral, setReferral] = useState('');
  const [error, setError] = useState('');
  const scrollRef = useRef(null);
  const [kbHeight, setKbHeight] = useState(0);
  const [selectedTab, setSelectedTab] = useState('phone');
  const [fullName, setFullName] = useState('');
  const [email, setEmail] = useState('');
  const [emailError, setEmailError] = useState('');
  const router = useRouter();

  useEffect(() => {
    const showEvent = Platform.OS === 'ios' ? 'keyboardWillShow' : 'keyboardDidShow';
    const hideEvent = Platform.OS === 'ios' ? 'keyboardWillHide' : 'keyboardDidHide';
    const onShow = (e) => setKbHeight(e?.endCoordinates?.height || 0);
    const onHide = () => setKbHeight(0);
    const subShow = Keyboard.addListener(showEvent, onShow);
    const subHide = Keyboard.addListener(hideEvent, onHide);
    return () => {
      subShow.remove();
      subHide.remove();
    };
  }, []);

  const handleSendOTP = () => {
    setError('');
    if (mobile.trim().length === 10) {
      router.push('/auth/otp-verification');
    } else {
      setError('Please enter a valid 10-digit number');
    }
  };

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const isPhoneValid = mobile.length === 10;
  const isEmailValid = emailRegex.test(email.trim()) && fullName.trim().length > 1;

  const handleEmailContinue = () => {
    if (!isEmailValid) {
      setEmailError('Please enter your name and a valid email address');
      return;
    }
    setEmailError('');
    router.push('/auth/otp-verification');
  };

  const tabOptions = [
    { key: 'phone', label: 'Phone', helper: 'Fastest verification', icon: Phone },
    { key: 'email', label: 'Email', helper: 'Prefer your inbox?', icon: Mail },
  ];

  return (
    <SafeAreaView style={styles.container} edges={['top', 'bottom']}>
      <StatusBar backgroundColor={COLORS.primary} barStyle="light-content" />
      <View style={styles.mainContainer}>
        <View style={styles.navySection}>
          <LinearGradient
            colors={[COLORS.primaryLight, COLORS.primary, COLORS.primaryDark, COLORS.darkestGreen]}
            style={StyleSheet.absoluteFillObject}
            start={{ x: 0, y: 0 }}
            end={{ x: 1, y: 1 }}
          />

          <View style={styles.decorativeCircles}>
            <View style={[styles.circle, styles.circle1]} />
            <View style={[styles.circle, styles.circle2]} />
            <View style={[styles.circle, styles.circle3]} />
          </View>

          <TouchableOpacity onPress={() => router.back()} style={styles.backButton} activeOpacity={0.7}>
            <ArrowLeft size={moderateScale(22)} color={COLORS.white} strokeWidth={2.5} />
          </TouchableOpacity>

          <View style={styles.brandSection}>
            <View style={styles.iconContainer}>
              <Sparkles size={moderateScale(40)} color={COLORS.white} strokeWidth={2.5} />
            </View>
            <Text style={styles.brand}>OMBARO</Text>
            <Text style={styles.tagline}>Beauty & Wellness Hub</Text>

            <View style={styles.welcomeBox}>
              <Text style={styles.welcomeMessage}>Welcome! Join thousands of beauty enthusiasts</Text>
            </View>

           
          </View>
        </View>

        <View style={styles.whiteSection}>
          <KeyboardAvoidingView
            style={{ flex: 1 }}
            behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
            keyboardVerticalOffset={Platform.OS === 'ios' ? 0 : 24}
          >
            <ScrollView
              ref={scrollRef}
              keyboardShouldPersistTaps="always"
              contentContainerStyle={[
                styles.formScrollContent,
                { paddingBottom: Math.max(verticalScale(24), kbHeight + verticalScale(12)) },
              ]}
              showsVerticalScrollIndicator={false}
              contentInsetAdjustmentBehavior="automatic"
              automaticallyAdjustKeyboardInsets
              style={{ flex: 1 }}
            >
              <View style={styles.tabSwitch}>
                {tabOptions.map((tab) => {
                  const isActive = selectedTab === tab.key;
                  const Icon = tab.icon;
                  return (
                    <TouchableOpacity
                      key={tab.key}
                      style={[styles.tabButton, isActive && styles.tabButtonActive]}
                      onPress={() => setSelectedTab(tab.key)}
                      activeOpacity={0.85}
                    >
                      <View style={styles.tabButtonInner}>
                        <View style={[styles.tabIconBadge, isActive && styles.tabIconBadgeActive]}>
                          <Icon size={moderateScale(20)} color={isActive ? COLORS.primary : COLORS.textGray} />
                        </View>
                        <View style={styles.tabTextContainer}>
                          <Text style={isActive ? styles.tabLabelActive : styles.tabLabel}>{tab.label}</Text>
                          <Text style={styles.tabHelper}>{tab.helper}</Text>
                        </View>
                      </View>
                    </TouchableOpacity>
                  );
                })}
              </View>

              <View style={styles.formCard}>
                {selectedTab === 'phone' ? (
                  <ContinueWithPhone
                    referral={referral}
                    setReferral={setReferral}
                    mobile={mobile}
                    setMobile={setMobile}
                    error={error}
                    isValid={isPhoneValid}
                    handleSendOTP={handleSendOTP}
                  />
                ) : (
                  <ContinueWithEmail
                    fullName={fullName}
                    onChangeFullName={setFullName}
                    email={email}
                    onChangeEmail={(value) => {
                      if (emailError) {
                        setEmailError('');
                      }
                      setEmail(value);
                    }}
                    emailError={emailError}
                    isEmailValid={isEmailValid}
                    handleEmailContinue={handleEmailContinue}
                  />
                )}
              </View>

            </ScrollView>
          </KeyboardAvoidingView>
        </View>
      </View>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.white,
  },
  mainContainer: {
    flex: 1,
    flexDirection: isTablet ? 'row' : 'column',
    height,
  },
  navySection: {
    backgroundColor: COLORS.primary,
    width: isTablet ? '45%' : '100%',
    height: isTablet ? '100%' : height * 0.48,
    paddingHorizontal: moderateScale(24),
    paddingTop: verticalScale(12),
    paddingBottom: verticalScale(28),
    justifyContent: 'space-between',
    position: 'relative',
    overflow: 'hidden',
  },
  decorativeCircles: {
    ...StyleSheet.absoluteFillObject,
    zIndex: 0,
  },
  circle: {
    position: 'absolute',
    borderRadius: 999,
    backgroundColor: 'rgba(255, 255, 255, 0.08)',
  },
  circle1: {
    width: moderateScale(320),
    height: moderateScale(320),
    top: -moderateScale(120),
    right: -moderateScale(100),
  },
  circle2: {
    width: moderateScale(220),
    height: moderateScale(220),
    bottom: -moderateScale(80),
    left: -moderateScale(60),
    backgroundColor: 'rgba(255, 255, 255, 0.05)',
  },
  circle3: {
    width: moderateScale(160),
    height: moderateScale(160),
    top: '42%',
    left: -moderateScale(50),
    backgroundColor: 'rgba(255, 255, 255, 0.06)',
  },
  backButton: {
    zIndex: 1,
    width: moderateScale(46),
    height: moderateScale(46),
    borderRadius: moderateScale(14),
    backgroundColor: 'rgba(255, 255, 255, 0.25)',
    alignItems: 'center',
    justifyContent: 'center',
    alignSelf: 'flex-start',
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 2 },
        shadowOpacity: 0.1,
        shadowRadius: 4,
      },
      android: {
        elevation: 2,
      },
    }),
  },
  brandSection: {
    alignItems: 'center',
    paddingHorizontal: moderateScale(16),
    paddingBottom: verticalScale(20),
    zIndex: 1,
  },
  iconContainer: {
    width: moderateScale(72),
    height: moderateScale(72),
    borderRadius: moderateScale(18),
    backgroundColor: 'rgba(255, 255, 255, 0.25)',
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: verticalScale(14),
    borderWidth: 2,
    borderColor: 'rgba(255, 255, 255, 0.4)',
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 4 },
        shadowOpacity: 0.15,
        shadowRadius: 8,
      },
      android: {
        elevation: 4,
      },
    }),
  },
  brand: {
    fontSize: moderateScale(34),
    fontWeight: '900',
    color: COLORS.white,
    letterSpacing: 3,
    marginBottom: verticalScale(4),
  },
  tagline: {
    fontSize: moderateScale(12),
    color: 'rgba(255, 255, 255, 0.95)',
    fontWeight: '600',
    marginBottom: verticalScale(16),
    letterSpacing: 0.8,
  },
  welcomeBox: {
    backgroundColor: 'rgba(255, 255, 255, 0.2)',
    borderRadius: moderateScale(16),
    paddingVertical: moderateScale(14),
    paddingHorizontal: moderateScale(20),
    borderWidth: 1.5,
    borderColor: 'rgba(255, 255, 255, 0.3)',
    width: '92%',
    maxWidth: moderateScale(320),
    marginBottom: verticalScale(18),
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 2 },
        shadowOpacity: 0.1,
        shadowRadius: 4,
      },
      android: {
        elevation: 2,
      },
    }),
  },
  welcomeMessage: {
    fontSize: moderateScale(14),
    fontWeight: '600',
    color: COLORS.white,
    textAlign: 'center',
    lineHeight: moderateScale(20),
  },
  trustMetrics: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-around',
    width: '100%',
    paddingHorizontal: moderateScale(12),
  },
  metricItem: {
    alignItems: 'center',
    flex: 1,
  },
  metricValue: {
    fontSize: moderateScale(18),
    fontWeight: '900',
    color: COLORS.white,
    marginBottom: verticalScale(2),
  },
  metricLabel: {
    fontSize: moderateScale(10),
    color: 'rgba(255, 255, 255, 0.85)',
    fontWeight: '600',
    textAlign: 'center',
  },
  metricDivider: {
    width: 1,
    height: moderateScale(32),
    backgroundColor: 'rgba(255, 255, 255, 0.3)',
  },
  whiteSection: {
    backgroundColor: COLORS.white,
    width: isTablet ? '55%' : '100%',
    flex: 1,
    paddingHorizontal: moderateScale(20),
    paddingTop: verticalScale(24),
    paddingBottom: verticalScale(16),
  },
  formScrollContent: {
    flexGrow: 1,
    paddingBottom: verticalScale(24),
  },
  tabSwitch: {
    flexDirection: 'row',
    backgroundColor: COLORS.borderLight,
    borderRadius: moderateScale(16),
    padding: moderateScale(4),
    marginBottom: verticalScale(24),
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 1 },
        shadowOpacity: 0.05,
        shadowRadius: 2,
      },
      android: {
        elevation: 1,
      },
    }),
  },
  tabButton: {
    flex: 1,
    borderRadius: moderateScale(12),
    paddingVertical: moderateScale(12),
    paddingHorizontal: moderateScale(8),
    backgroundColor: 'transparent',
  },
  tabButtonActive: {
    backgroundColor: COLORS.white,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 2 },
        shadowOpacity: 0.1,
        shadowRadius: 4,
      },
      android: {
        elevation: 2,
      },
    }),
  },
  tabButtonInner: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  tabIconBadge: {
    width: moderateScale(38),
    height: moderateScale(38),
    borderRadius: moderateScale(10),
    backgroundColor: COLORS.borderLight,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: moderateScale(10),
  },
  tabIconBadgeActive: {
    backgroundColor: '#E8F5E9',
  },
  tabTextContainer: {
    flex: 1,
  },
  tabLabel: {
    fontSize: moderateScale(14),
    fontWeight: '600',
    color: COLORS.textGray,
    marginBottom: verticalScale(2),
  },
  tabLabelActive: {
    fontSize: moderateScale(14),
    fontWeight: '700',
    color: COLORS.textDark,
    marginBottom: verticalScale(2),
  },
  tabHelper: {
    fontSize: moderateScale(10),
    color: COLORS.textLight,
    fontWeight: '500',
  },
  formCard: {
    backgroundColor: COLORS.white,
    borderRadius: moderateScale(20),
    padding: moderateScale(20),
    marginBottom: verticalScale(20),
    borderWidth: 1.5,
    borderColor: COLORS.border,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 4 },
        shadowOpacity: 0.08,
        shadowRadius: 12,
      },
      android: {
        elevation: 3,
      },
    }),
  },
  formContainer: {
    width: '100%',
  },
  inputGroup: {
    marginBottom: verticalScale(20),
  },
  label: {
    fontSize: moderateScale(13),
    fontWeight: '700',
    color: COLORS.textDark,
    marginBottom: verticalScale(8),
    letterSpacing: 0.3,
  },
  inputWrapper: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: COLORS.white,
    borderWidth: 1.5,
    borderColor: COLORS.border,
    borderRadius: moderateScale(14),
    paddingHorizontal: moderateScale(14),
    paddingVertical: Platform.OS === 'ios' ? moderateScale(14) : moderateScale(4),
    minHeight: moderateScale(54),
  },
  inputError: {
    borderColor: COLORS.error,
    backgroundColor: COLORS.errorLight,
  },
  iconBox: {
    width: moderateScale(36),
    height: moderateScale(36),
    borderRadius: moderateScale(10),
    backgroundColor: COLORS.borderLight,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: moderateScale(12),
  },
  iconBoxActive: {
    backgroundColor: '#E8F5E9',
  },
  input: {
    flex: 1,
    fontSize: moderateScale(15),
    fontWeight: '600',
    color: COLORS.textDark,
    paddingVertical: moderateScale(8),
  },
  phoneInputContainer: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'center',
  },
  countryCode: {
    fontSize: moderateScale(15),
    fontWeight: '700',
    color: COLORS.textDark,
    marginRight: moderateScale(8),
    paddingRight: moderateScale(8),
    borderRightWidth: 1,
    borderRightColor: COLORS.border,
  },
  phoneInput: {
    flex: 1,
    marginLeft: 0,
  },
  checkIcon: {
    marginLeft: moderateScale(8),
  },
  errorContainer: {
    marginTop: verticalScale(8),
    backgroundColor: COLORS.errorLight,
    paddingHorizontal: moderateScale(12),
    paddingVertical: moderateScale(8),
    borderRadius: moderateScale(8),
    borderLeftWidth: 3,
    borderLeftColor: COLORS.error,
  },
  errorText: {
    fontSize: moderateScale(12),
    color: COLORS.error,
    fontWeight: '600',
  },
  hintContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    marginTop: verticalScale(8),
    paddingHorizontal: moderateScale(4),
  },
  hint: {
    fontSize: moderateScale(11),
    color: COLORS.textGray,
    marginLeft: moderateScale(6),
    fontWeight: '500',
  },
  infoNote: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#E8F5E9',
    paddingHorizontal: moderateScale(12),
    paddingVertical: moderateScale(10),
    borderRadius: moderateScale(10),
    marginBottom: verticalScale(20),
    borderLeftWidth: 3,
    borderLeftColor: COLORS.primary,
  },
  infoIconBox: {
    width: moderateScale(28),
    height: moderateScale(28),
    borderRadius: moderateScale(8),
    backgroundColor: 'rgba(1, 107, 58, 0.1)',
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: moderateScale(10),
  },
  infoNoteText: {
    flex: 1,
    fontSize: moderateScale(12),
    color: COLORS.primary,
    fontWeight: '600',
    lineHeight: moderateScale(16),
  },
  button: {
    borderRadius: moderateScale(14),
    overflow: 'hidden',
    marginBottom: verticalScale(16),
    ...Platform.select({
      ios: {
        shadowColor: COLORS.primary,
        shadowOffset: { width: 0, height: 4 },
        shadowOpacity: 0.3,
        shadowRadius: 8,
      },
      android: {
        elevation: 4,
      },
    }),
  },
  buttonDisabled: {
    opacity: 0.5,
    ...Platform.select({
      ios: {
        shadowOpacity: 0.1,
      },
      android: {
        elevation: 1,
      },
    }),
  },
  buttonGradient: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: moderateScale(16),
    paddingHorizontal: moderateScale(20),
  },
  buttonIcon: {
    marginRight: moderateScale(10),
  },
  buttonText: {
    fontSize: moderateScale(16),
    fontWeight: '800',
    color: COLORS.white,
    letterSpacing: 0.5,
  },
  privacyNote: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: moderateScale(12),
  },
  privacyIconBox: {
    width: moderateScale(24),
    height: moderateScale(24),
    borderRadius: moderateScale(6),
    backgroundColor: '#E8F5E9',
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: moderateScale(8),
  },
  privacyText: {
    fontSize: moderateScale(12),
    color: COLORS.textGray,
    fontWeight: '500',
  },
  benefitsSection: {
    backgroundColor: COLORS.borderLight,
    borderRadius: moderateScale(16),
    padding: moderateScale(20),
    marginTop: verticalScale(12),
  },
  benefitsTitle: {
    fontSize: moderateScale(16),
    fontWeight: '800',
    color: COLORS.textDark,
    marginBottom: verticalScale(16),
    textAlign: 'center',
  },
  benefitsList: {
    gap: verticalScale(12),
  },
  benefitItem: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: COLORS.white,
    padding: moderateScale(12),
    borderRadius: moderateScale(12),
    borderWidth: 1,
    borderColor: COLORS.border,
  },
  benefitIcon: {
    fontSize: moderateScale(20),
    marginRight: moderateScale(12),
  },
  benefitText: {
    flex: 1,
    fontSize: moderateScale(13),
    fontWeight: '600',
    color: COLORS.textGray,
    lineHeight: moderateScale(18),
  },
});